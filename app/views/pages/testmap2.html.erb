
<div id="directions" style="width: 600px; height: 600px;"></div>
<div id="directions-panel" style="width: 400px; height: 200px;"></div>
<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    var directionsDisplay = new google.maps.DirectionsRenderer();
    var directionsService = new google.maps.DirectionsService();

    function calcRoute() {
      var origin      = new google.maps.LatLng(41.850033, -87.6500523);
      var destination = new google.maps.LatLng(42.850033, -85.6500523);
      var request = {
          origin:      origin,
          destination: destination,
          travelMode:  google.maps.TravelMode.WALKING
      };
      directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
          console.log(response.routes[0].legs[0].duration.text)
          directionsDisplay.setDirections(response);
        }
      });
    }

    calcRoute();

    var handler = Gmaps.build('Google');
    handler.buildMap({ internal: {id: 'directions'}}, function(){
      directionsDisplay.setMap(handler.getMap());
      directionsDisplay.setPanel(document.getElementById('directions-panel'))
    });
  <% end %>
<% end %>
